<?xml version="1.0" encoding="utf-8"?>
<c:component type="chHtmlContent" componentId="chSourceHighlighting_1" xmlns:c="http://com.snnmo.website">
  <c:content style="margin-top:1.5em;">
    <![CDATA[ 
      <p style="font-weight:bold;">
        This tutorial will give the reader instructions to setup Hadoop 2.2.0 on Mac OS X with minimal configurations for exercise and development purposes. 
        I have done the installation on my 13-inc MacBook Pro Retina.
      </p>
      
      <h4 style="font-size:1.5em;margin-top:2em;">Enable Remote Access</h4>
      <p style="margin-top:1.5em;">
        <img style="max-width:100%;" src="//c1.staticflickr.com/3/2898/14263072749_5c71379b14_b.jpg" alt="" />
        <br />
        <br />
        <span>The SSH server will be started in the background.</span>
      </p>
      
      <h4 style="font-size:1.5em;margin-top:2em;">Configure SSH</h4>
      <p style="margin-top:1.5em;font-weight:bold;color:green;">
        $ ssh-keygen -t rsa -P '' <br />
        $ cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys<br />
        $ ssh localhost
      </p>
      
      <h4 style="font-size:1.5em;margin-top:2em;">Download Hadoop 2.2.0</h4>
      <p style="margin-top:1.5em;font-weight:bold;color:green;">
        $ cd ~<br />
        $ curl -O http://ftp.halifax.rwth-aachen.de/apache/hadoop/common/hadoop-2.2.0/hadoop-2.2.0.tar.gz<br />
        $ tar xzf hadoop-2.2.0.tar.gz<br />
        $ mv hadoop-2.2.0 hadoop
      </p>
      
      <h4 style="font-size:1.5em;margin-top:2em;">Set Hadoop-related Environment Variables</h4>
      <p style="margin-top:1.5em;font-weight:bold;color:green;">
        $ vi ~/.profile <br />
        # Add these variables <br />
        export JAVA_HOME=`/usr/libexec/java_home -v 1.6` <br />
        export HADOOP_INSTALL=$HOME/hadoop <br />
        export HADOOP_CONF_DIR=$HADOOP_INSTALL/etc/hadoop/ <br />
        export HADOOP_MAPRED_HOME=$HADOOP_INSTALL <br />
        export HADOOP_COMMON_HOME=$HADOOP_INSTALL <br />
        export HADOOP_HDFS_HOME=$HADOOP_INSTALL <br />
        export YARN_HOME=$HADOOP_INSTALL <br />
        export PATH=$PATH:$HADOOP_INSTALL/bin:$HADOOP_INSTALL/sbin
        
        <br />
        <br />
        $ . ~/.profile
      </p>
      
      <h4 style="font-size:1.5em;margin-top:2em;">Configure Hadoop</h4>
      <p style="margin-top:1.5em;">
        <h5 style="font-size:1.2em;font-style:italic;color:gray;">Create directories</h5>
        <span style="color:green;font-weight:bold;margin-top:.5em;display:block;">
        $ mkdir -p $HOME/data/hdfs/namenode <br />
        $ mkdir -p $HOME/data/hdfs/datanode
        </span>
        
        <h5 style="font-size:1.2em;margin-top:1em;font-style:italic;color:gray;">Edit etc/hadoop/hadoop-env.sh</h5>
        <span style="color:green;font-weight:bold;margin-top:.5em;display:block;">
        export JAVA_HOME=`/usr/libexec/java_home -v 1.6`
        </span>
        
        <h5 style="font-size:1.2em;margin-top:1em;font-style:italic;color:gray;">Edit etc/hadoop/core-site.xml</h5>
        <span style="color:green;font-weight:bold;margin-top:.5em;display:block;">
          &lt;?xml version="1.0" encoding="UTF-8"?&gt;      <br />
          &lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt; <br />
          &lt;configuration&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;    &lt;property&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        &lt;name>fs.default.name&lt;/name&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        &lt;value>hdfs://localhost:8020&lt;/value&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;    &lt;/property&gt; <br />
          &lt;/configuration&gt; <br />
        </span>
        
        <h5 style="font-size:1.2em;margin-top:1em;font-style:italic;color:gray;">Edit etc/hadoop/hdfs-site.xml</h5>
        <span style="color:green;font-weight:bold;margin-top:.5em;display:block;">
          &lt;?xml version="1.0" encoding="UTF-8"?&gt;      <br />
          &lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt; <br />
          &lt;configuration&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;  &lt;property&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      &lt;name&gt;dfs.replication&lt;/name&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      &lt;value&gt;1&lt;/value&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;  &lt;/property&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;  &lt;property&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      &lt;value&gt;file:/Users/mabduh/data/hdfs/namenode&lt;/value&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;  &lt;/property&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;  &lt;property&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      &lt;value&gt;file:/Users/mabduh/data/hdfs/datanode&lt;/value&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;  &lt;/property&gt; <br />
          &lt;/configuration&gt; <br />
        </span>
        
        <h5 style="font-size:1.2em;margin-top:1em;font-style:italic;color:gray;">Edit etc/hadoop/yarn-site.xml</h5>
        <span style="color:green;font-weight:bold;margin-top:.5em;display:block;">
          &lt;?xml version="1.0" encoding="UTF-8"?&gt;      <br />
          &lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt; <br />
          &lt;configuration&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;    &lt;property&gt;<br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;<br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;<br />
          &nbsp;&nbsp;&nbsp;&nbsp;    &lt;/property&gt;<br />
          &nbsp;&nbsp;&nbsp;&nbsp;    &lt;property&gt;<br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        &lt;name&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;/name&gt;<br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;<br />
          &nbsp;&nbsp;&nbsp;&nbsp;    &lt;/property&gt;<br />
          &lt;/configuration&gt; <br />
        </span>
        
        <h5 style="font-size:1.2em;margin-top:1em;font-style:italic;color:gray;">Edit etc/hadoop/mapred-site.xml</h5>        
        <span style="color:green;font-weight:bold;margin-top:.5em;display:block;">
          $ cd $HADOOP_INSTALL<br />
          $ cp etc/hadoop/mapred-site.xml.template etc/hadoop/mapred-site.xml<br /><br />
          
          &lt;?xml version="1.0" encoding="UTF-8"?&gt;      <br />
          &lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt; <br />
          &lt;configuration&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;  &lt;property&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      &lt;name&gt;mapreduce.framework.name&lt;/name&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      &lt;value&gt;yarn&lt;/value&gt; <br />
          &nbsp;&nbsp;&nbsp;&nbsp;  &lt;/property&gt; <br />
          &lt;/configuration&gt; <br />
        </span>
        
        <h5 style="font-size:1.2em;margin-top:1em;font-style:italic;color:gray;">Format Name Node</h5>        
        <span style="color:green;font-weight:bold;margin-top:.5em;display:block;">
          $ hdfs namenode -format
        </span>
        
        <h5 style="font-size:1.2em;margin-top:1em;font-style:italic;color:gray;">Start Hadoop Services</h5>        
        <span style="color:green;font-weight:bold;margin-top:.5em;display:block;">
          $ start-dfs.sh<br />
          $ start-yarn.sh
        </span>
      </p>
      
      
      <h4 style="font-size:1.5em;margin-top:2em;">Run Hadoop Example</h4>
      <p style="margin-top:1.5em;font-weight:bold;color:green;">
        $ cd $HADOOP_INSTALL <br />
        $ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.2.0.jar pi 2 5
      </p>
    ]]>
  </c:content>

</c:component>
